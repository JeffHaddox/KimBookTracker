<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookTracker - Your Reading Adventure</title>
    <meta name="description" content="Track your reading journey with BookTracker">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .backdrop-blur-sm {
            backdrop-filter: blur(4px);
        }
        
        .backdrop-blur-md {
            backdrop-filter: blur(12px);
        }

        .bg-gradient-to-br {
            background-image: linear-gradient(to bottom right, var(--tw-gradient-stops));
        }

        .from-purple-50 { --tw-gradient-from: #faf5ff; }
        .via-blue-50 { --tw-gradient-to: #eff6ff; }
        .to-pink-50 { --tw-gradient-to: #fdf2f8; }
        
        .text-gradient {
            background: linear-gradient(45deg, #8b5cf6, #3b82f6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50">
    <!-- Floating particles -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-1/4 left-1/4 w-4 h-4 bg-purple-400 rounded-full animate-pulse opacity-30"></div>
        <div class="absolute top-1/3 right-1/4 w-3 h-3 bg-pink-400 rounded-full animate-pulse opacity-40"></div>
        <div class="absolute top-1/2 left-1/3 w-2 h-2 bg-blue-400 rounded-full animate-pulse opacity-35"></div>
        <div class="absolute top-3/4 right-1/3 w-5 h-5 bg-purple-300 rounded-full animate-pulse opacity-25"></div>
        <div class="absolute top-1/6 right-1/2 w-3 h-3 bg-pink-300 rounded-full animate-pulse opacity-30"></div>
    </div>

    <!-- Header -->
    <header class="bg-white bg-opacity-90 shadow-xl border-b border-purple-100 relative z-10">
        <div class="max-w-6xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-black text-gradient">BookTracker</h1>
                        <p class="text-sm text-gray-600 font-medium">Your Reading Adventure Awaits! ✨</p>
                    </div>
                </div>
                <button onclick="showModal()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-2xl hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-3 font-bold shadow-lg hover:scale-105">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add Book
                    <span class="animate-pulse">✨</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white bg-opacity-90 border-b border-purple-100 relative z-10">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex space-x-8 overflow-x-auto">
                <button onclick="showTab('library')" id="tab-library" class="tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-t-2xl shadow-lg">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    My Library
                    <span class="animate-pulse">✨</span>
                </button>
                <button onclick="showTab('to-read')" id="tab-to-read" class="tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent text-gray-600 hover:text-gray-800">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                    To Read
                </button>
                <button onclick="showTab('recommendations')" id="tab-recommendations" class="tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent text-gray-600 hover:text-gray-800">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                    </svg>
                    Recommendations
                </button>
                <button onclick="showTab('analytics')" id="tab-analytics" class="tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent text-gray-600 hover:text-gray-800">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    Analytics
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8 relative z-10">
        <!-- Library Tab -->
        <div id="content-library" class="tab-content">
            <div class="mb-8">
                <div class="flex flex-col sm:flex-row gap-4 mb-8">
                    <div class="flex-1">
                        <div class="relative">
                            <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 text-purple-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            <input type="text" placeholder="Search books or authors... ✨" class="w-full pl-12 pr-4 py-3 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 transition-all bg-white bg-opacity-80 font-medium">
                        </div>
                    </div>
                    <select class="px-4 py-3 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 transition-all bg-white bg-opacity-80 font-medium">
                        <option>🌟 All Genres</option>
                        <option>📚 Fiction</option>
                        <option>📚 Self-Help</option>
                        <option>📚 Science Fiction</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                    <!-- Sample Books -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-purple-200 group">
                        <div class="aspect-[2/3] bg-gradient-to-br from-purple-100 to-pink-100 relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=200&h=300&fit=crop" alt="Book cover" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            <button onclick="shareBook('The Midnight Library')" class="absolute top-3 left-3 bg-white bg-opacity-90 p-2 rounded-full shadow-lg hover:bg-opacity-100 hover:scale-110 transition-all opacity-0 group-hover:opacity-100">
                                <svg class="w-3.5 h-3.5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 line-clamp-2 text-gray-800">The Midnight Library</h3>
                            <p class="text-purple-600 text-xs mb-2 font-medium">Matt Haig</p>
                            <div class="flex items-center justify-between text-xs text-gray-500 mb-2">
                                <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium">Fiction</span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium">288p</span>
                            </div>
                            <div class="mb-3 flex justify-center">
                                <div class="flex gap-1">
                                    <span class="text-yellow-400">★★★★★</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-purple-200 group">
                        <div class="aspect-[2/3] bg-gradient-to-br from-purple-100 to-pink-100 relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1589829085413-56de8ae18c73?w=200&h=300&fit=crop" alt="Book cover" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            <button onclick="shareBook('Atomic Habits')" class="absolute top-3 left-3 bg-white bg-opacity-90 p-2 rounded-full shadow-lg hover:bg-opacity-100 hover:scale-110 transition-all opacity-0 group-hover:opacity-100">
                                <svg class="w-3.5 h-3.5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 line-clamp-2 text-gray-800">Atomic Habits</h3>
                            <p class="text-purple-600 text-xs mb-2 font-medium">James Clear</p>
                            <div class="flex items-center justify-between text-xs text-gray-500 mb-2">
                                <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium">Self-Help</span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium">320p</span>
                            </div>
                            <div class="mb-3 flex justify-center">
                                <div class="flex gap-1">
                                    <span class="text-yellow-400">★★★★☆</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-purple-200 group">
                        <div class="aspect-[2/3] bg-gradient-to-br from-purple-100 to-pink-100 relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=300&fit=crop" alt="Book cover" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            <button onclick="shareBook('Dune')" class="absolute top-3 left-3 bg-white bg-opacity-90 p-2 rounded-full shadow-lg hover:bg-opacity-100 hover:scale-110 transition-all opacity-0 group-hover:opacity-100">
                                <svg class="w-3.5 h-3.5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="p-4">
                            <h3 class="font-bold text-sm mb-1 line-clamp-2 text-gray-800">Dune</h3>
                            <p class="text-purple-600 text-xs mb-2 font-medium">Frank Herbert</p>
                            <div class="flex items-center justify-between text-xs text-gray-500 mb-2">
                                <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium">Sci-Fi</span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium">688p</span>
                            </div>
                            <div class="mb-3 flex justify-center">
                                <div class="flex gap-1">
                                    <span class="text-yellow-400">★★★★★</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="content-analytics" class="tab-content hidden">
            <div class="mb-8 flex flex-col sm:flex-row items-center justify-between">
                <div>
                    <h2 class="text-3xl font-black mb-2 text-gradient">Your Reading Journey 📊</h2>
                    <p class="text-gray-600">Track your amazing progress! 🚀</p>
                </div>
                <div class="flex gap-4 items-center mt-4 sm:mt-0">
                    <select class="px-4 py-3 border-2 border-green-200 rounded-2xl focus:ring-4 focus:ring-green-200 focus:border-green-500 transition-all bg-white bg-opacity-80 font-medium">
                        <option>📅 Last Month</option>
                        <option selected>🗓️ Last Year</option>
                        <option>🌟 All Time</option>
                    </select>
                    <button onclick="shareStats()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-2xl hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-2 font-bold shadow-lg hover:scale-105">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                        </svg>
                        Share Stats
                        <span class="animate-pulse">✨</span>
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white bg-opacity-90 p-8 rounded-3xl shadow-2xl border-2 border-blue-100 hover:scale-105 transition-all">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm font-medium mb-1">Books Read 📚</p>
                            <p class="text-4xl font-black text-gradient">3</p>
                            <p class="text-xs text-gray-500 mt-1">Keep it up! 🎉</p>
                        </div>
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="bg-white bg-opacity-90 p-8 rounded-3xl shadow-2xl border-2 border-green-100 hover:scale-105 transition-all">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm font-medium mb-1">Pages Read 📖</p>
                            <p class="text-4xl font-black text-gradient">1,296</p>
                            <p class="text-xs text-gray-500 mt-1">Amazing! 🚀</p>
                        </div>
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="bg-white bg-opacity-90 p-8 rounded-3xl shadow-2xl border-2 border-yellow-100 hover:scale-105 transition-all">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm font-medium mb-1">Average Rating ⭐</p>
                            <p class="text-4xl font-black text-gradient">4.7</p>
                            <p class="text-xs text-gray-500 mt-1">Excellent taste! ✨</p>
                        </div>
                        <div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg">
                            <svg class="w-7 h-7 text-white fill-current" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other tabs (hidden by default) -->
        <div id="content-to-read" class="tab-content hidden">
            <div class="text-center py-16">
                <h2 class="text-3xl font-black mb-4 text-gradient">Your Reading Wishlist ✨</h2>
                <p class="text-xl text-gray-600 mb-8">Add books you want to read next!</p>
                <button onclick="showModal()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:scale-105 transition-all shadow-lg">
                    Add Your First Book 📚
                </button>
            </div>
        </div>

        <div id="content-recommendations" class="tab-content hidden">
            <div class="text-center py-16">
                <h2 class="text-3xl font-black mb-4 text-gradient">Handpicked Just for You! 🎯</h2>
                <p class="text-xl text-gray-600 mb-8">Based on your amazing reading taste and ratings ⭐</p>
                <button onclick="showModal()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:scale-105 transition-all shadow-lg">
                    Get Recommendations 🎯
                </button>
            </div>
        </div>
    </main>

    <!-- Add Book Modal -->
    <div id="add-book-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm hidden">
        <div class="bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl transform animate-bounce">
            <div class="text-center">
                <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold mb-6 text-gradient">Add Your Next Great Read!</h3>
            </div>
            <div class="space-y-4">
                <button onclick="openBarcodeScanner()" class="w-full flex items-center justify-center gap-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all hover:scale-105 shadow-lg group">
                    <svg class="w-6 h-6 group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                    </svg>
                    <span class="font-bold">📱 Scan Barcode</span>
                    <span class="animate-pulse">✨</span>
                </button>
                <button onclick="openPhotoCapture()" class="w-full flex items-center justify-center gap-4 bg-gradient-to-r from-green-500 to-green-600 text-white py-4 px-6 rounded-2xl hover:from-green-600 hover:to-green-700 transition-all hover:scale-105 shadow-lg group">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span class="font-bold">📸 Photo of Cover</span>
                    <span class="animate-bounce">⚡</span>
                </button>
                <button onclick="simulateManualSearch()" class="w-full flex items-center justify-center gap-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white py-4 px-6 rounded-2xl hover:from-purple-600 hover:to-purple-700 transition-all hover:scale-105 shadow-lg group">
                    <svg class="w-6 h-6 group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <span class="font-bold">Manual Search</span>
                    <span class="animate-spin">⭐</span>
                </button>
            </div>
            <button onclick="hideModal()" class="w-full mt-6 py-3 text-gray-600 hover:text-gray-800 transition-colors font-medium">
                Cancel
            </button>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl transform animate-pulse">
            <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gradient">Share Your Reading Journey!</h3>
                <div id="share-content" class="mb-4">
                    <p class="text-gray-600 mb-2">Share your reading stats:</p>
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-xl">
                        <p class="font-bold text-2xl text-gray-800">3 books</p>
                        <p class="text-sm text-gray-600">1,296 pages read</p>
                        <p class="text-sm text-gray-600">⭐ 4.7 avg rating</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-3 gap-3 mb-4">
                    <button onclick="shareToSocial('instagram')" class="flex flex-col items-center p-3 bg-gradient-to-br from-pink-500 to-red-500 text-white rounded-xl hover:scale-105 transition-transform shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987c6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.611-3.132-1.551l3.132-1.551v3.102zm-.783-4.72L4.534 10.716c.328-1.165 1.292-2.113 2.577-2.577l1.552 3.132-3.997 1.997zm1.304-5.018c.443-.443 1.048-.717 1.717-.717s1.274.274 1.717.717l-1.717 1.717-1.717-1.717zm6.236 0c1.297 0 2.448.611 3.132 1.551l-3.132 1.551V7.25z"/>
                        </svg>
                        <span class="text-xs mt-1">Instagram</span>
                    </button>
                    <button onclick="shareToSocial('twitter')" class="flex flex-col items-center p-3 bg-gradient-to-br from-blue-400 to-blue-600 text-white rounded-xl hover:scale-105 transition-transform shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                        <span class="text-xs mt-1">Twitter</span>
                    </button>
                    <button onclick="shareToSocial('facebook')" class="flex flex-col items-center p-3 bg-gradient-to-br from-blue-600 to-indigo-700 text-white rounded-xl hover:scale-105 transition-transform shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span class="text-xs mt-1">Facebook</span>
                    </button>
                </div>
            </div>
            
            <button onclick="hideShareModal()" class="w-full mt-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                Cancel
            </button>
        </div>
    </div>

    <!-- Camera Modal -->
    <div id="camera-modal" class="fixed inset-0 bg-black z-50 hidden">
        <div class="relative w-full h-full">
            <!-- Camera Header -->
            <div class="absolute top-0 left-0 right-0 bg-black bg-opacity-70 p-4 z-10">
                <div class="flex items-center justify-between text-white">
                    <button onclick="closeCameraModal()" class="flex items-center gap-2 text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                        Back
                    </button>
                    <h3 class="text-lg font-bold" id="camera-title">Scan Barcode</h3>
                    <button onclick="switchCamera()" class="p-2 bg-white bg-opacity-20 rounded-full">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Camera Feed -->
            <video id="camera-feed" class="w-full h-full object-cover" autoplay playsinline></video>
            
            <!-- Camera Overlay -->
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                <div id="barcode-overlay" class="border-2 border-white w-64 h-32 opacity-50 hidden">
                    <div class="text-white text-center mt-2 text-sm">Position barcode here</div>
                </div>
                <div id="book-overlay" class="border-2 border-white w-48 h-64 opacity-50 hidden">
                    <div class="text-white text-center mt-2 text-sm">Position book cover here</div>
                </div>
            </div>

            <!-- Camera Controls -->
            <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 p-6">
                <div class="flex items-center justify-center">
                    <button onclick="capturePhoto()" class="w-16 h-16 bg-white rounded-full flex items-center justify-center hover:scale-110 transition-transform">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full"></div>
                    </button>
                </div>
                <div class="text-center mt-3">
                    <p class="text-white text-sm" id="camera-instructions">Tap the button to capture</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        function showTab(tabName) {
            // Hide all tab content
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active styles from all tabs
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.className = 'tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent text-gray-600 hover:text-gray-800';
            });
            
            // Show selected tab content
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            
            // Add active styles to selected tab
            const activeTab = document.getElementById(`tab-${tabName}`);
            const gradients = {
                'library': 'from-blue-500 to-cyan-500',
                'to-read': 'from-pink-500 to-rose-500',
                'recommendations': 'from-purple-500 to-indigo-500',
                'analytics': 'from-green-500 to-emerald-500'
            };
            
            activeTab.className = `tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent bg-gradient-to-r ${gradients[tabName]} text-white rounded-t-2xl shadow-lg`;
            activeTab.innerHTML += '<span class="animate-pulse">✨</span>';
        }

        // Modal functionality
        function showModal() {
            document.getElementById('add-book-modal').classList.remove('hidden');
        }

        function hideModal() {
            document.getElementById('add-book-modal').classList.add('hidden');
        }

        function shareBook(bookTitle) {
            document.getElementById('share-content').innerHTML = `
                <p class="text-gray-600 mb-2">Share this amazing book:</p>
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl">
                    <p class="font-semibold text-gray-800">"${bookTitle}"</p>
                    <p class="text-sm text-gray-600">Click to see full details!</p>
                    <div class="flex justify-center mt-2">
                        <span class="text-yellow-400">★★★★★</span>
                    </div>
                </div>
            `;
            document.getElementById('share-modal').classList.remove('hidden');
        }

        function shareStats() {
            document.getElementById('share-content').innerHTML = `
                <p class="text-gray-600 mb-2">Share your reading stats:</p>
                <div class="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-xl">
                    <p class="font-bold text-2xl text-gray-800">3 books</p>
                    <p class="text-sm text-gray-600">1,296 pages read</p>
                    <p class="text-sm text-gray-600">⭐ 4.7 avg rating</p>
                </div>
            `;
            document.getElementById('share-modal').classList.remove('hidden');
        }

        function hideShareModal() {
            document.getElementById('share-modal').classList.add('hidden');
        }

    <script>
        let currentStream = null;
        let facingMode = 'environment'; // 'user' for front camera, 'environment' for back camera
        let cameraMode = 'barcode'; // 'barcode' or 'photo'

        // PWA Service Worker Registration (with error handling)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                        // Continue without service worker
                    });
            });
        }

        // Tab functionality
        function showTab(tabName) {
            try {
                // Hide all tab content
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Remove active styles from all tabs
                const tabButtons = document.querySelectorAll('.tab-button');
                tabButtons.forEach(button => {
                    button.className = 'tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent text-gray-600 hover:text-gray-800';
                });
                
                // Show selected tab content
                const contentElement = document.getElementById(`content-${tabName}`);
                if (contentElement) {
                    contentElement.classList.remove('hidden');
                }
                
                // Add active styles to selected tab
                const activeTab = document.getElementById(`tab-${tabName}`);
                if (activeTab) {
                    const gradients = {
                        'library': 'from-blue-500 to-cyan-500',
                        'to-read': 'from-pink-500 to-rose-500',
                        'recommendations': 'from-purple-500 to-indigo-500',
                        'analytics': 'from-green-500 to-emerald-500'
                    };
                    
                    activeTab.className = `tab-button flex items-center gap-3 py-4 px-4 border-b-4 font-bold text-sm transition-all hover:scale-105 border-transparent bg-gradient-to-r ${gradients[tabName]} text-white rounded-t-2xl shadow-lg`;
                }
            } catch (error) {
                console.error('Tab switching error:', error);
            }
        }

        // Modal functionality
        function showModal() {
            try {
                const modal = document.getElementById('add-book-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Show modal error:', error);
            }
        }

        function hideModal() {
            try {
                const modal = document.getElementById('add-book-modal');
                if (modal) {
                    modal.classList.add('hidden');
                }
            } catch (error) {
                console.error('Hide modal error:', error);
            }
        }

        // Camera Functions with better error handling
        async function openBarcodeScanner() {
            try {
                cameraMode = 'barcode';
                await openCamera();
                
                const title = document.getElementById('camera-title');
                const barcodeOverlay = document.getElementById('barcode-overlay');
                const bookOverlay = document.getElementById('book-overlay');
                const instructions = document.getElementById('camera-instructions');
                
                if (title) title.textContent = 'Scan Barcode';
                if (barcodeOverlay) barcodeOverlay.classList.remove('hidden');
                if (bookOverlay) bookOverlay.classList.add('hidden');
                if (instructions) instructions.textContent = 'Position barcode in the frame and tap capture';
            } catch (error) {
                console.error('Barcode scanner error:', error);
                alert('Could not open barcode scanner. Please try manual search instead.');
            }
        }

        async function openPhotoCapture() {
            try {
                cameraMode = 'photo';
                await openCamera();
                
                const title = document.getElementById('camera-title');
                const barcodeOverlay = document.getElementById('barcode-overlay');
                const bookOverlay = document.getElementById('book-overlay');
                const instructions = document.getElementById('camera-instructions');
                
                if (title) title.textContent = 'Capture Book Cover';
                if (bookOverlay) bookOverlay.classList.remove('hidden');
                if (barcodeOverlay) barcodeOverlay.classList.add('hidden');
                if (instructions) instructions.textContent = 'Position book cover in the frame and tap capture';
            } catch (error) {
                console.error('Photo capture error:', error);
                alert('Could not open camera. Please try manual search instead.');
            }
        }

        async function openCamera() {
            hideModal();
            
            try {
                // Check if camera is supported
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    throw new Error('Camera not supported on this device');
                }

                // Request camera permission
                currentStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    }
                });

                const video = document.getElementById('camera-feed');
                const modal = document.getElementById('camera-modal');
                
                if (video && modal) {
                    video.srcObject = currentStream;
                    modal.classList.remove('hidden');
                    
                    // Wait for video to be ready
                    video.addEventListener('loadedmetadata', () => {
                        video.play().catch(e => console.error('Video play error:', e));
                    });
                }

            } catch (error) {
                console.error('Camera error:', error);
                let errorMessage = 'Camera access failed. ';
                
                if (error.name === 'NotAllowedError') {
                    errorMessage += 'Please allow camera access and try again.';
                } else if (error.name === 'NotFoundError') {
                    errorMessage += 'No camera found on this device.';
                } else if (error.name === 'NotSupportedError') {
                    errorMessage += 'Camera not supported on this browser.';
                } else {
                    errorMessage += 'Please try again or use manual search.';
                }
                
                alert(`📷 ${errorMessage}\n\n💡 Tip: Make sure you're using HTTPS and have granted camera permissions.`);
            }
        }

        function closeCameraModal() {
            try {
                // Stop camera stream
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                    currentStream = null;
                }
                
                // Hide modal and overlays
                const modal = document.getElementById('camera-modal');
                const barcodeOverlay = document.getElementById('barcode-overlay');
                const bookOverlay = document.getElementById('book-overlay');
                
                if (modal) modal.classList.add('hidden');
                if (barcodeOverlay) barcodeOverlay.classList.add('hidden');
                if (bookOverlay) bookOverlay.classList.add('hidden');
            } catch (error) {
                console.error('Close camera error:', error);
            }
        }

        async function switchCamera() {
            try {
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }
                
                facingMode = facingMode === 'environment' ? 'user' : 'environment';
                
                currentStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    }
                });

                const video = document.getElementById('camera-feed');
                if (video) {
                    video.srcObject = currentStream;
                    video.play().catch(e => console.error('Video play error:', e));
                }
            } catch (error) {
                console.error('Camera switch error:', error);
                facingMode = facingMode === 'environment' ? 'user' : 'environment'; // Revert
                alert('Could not switch camera. Using current camera.');
            }
        }

        function capturePhoto() {
            try {
                const video = document.getElementById('camera-feed');
                if (!video) return;
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0);
                
                // Convert to blob for processing
                canvas.toBlob(async (blob) => {
                    if (cameraMode === 'barcode') {
                        await processBarcodeImage(blob);
                    } else {
                        await processBookCoverImage(blob);
                    }
                }, 'image/jpeg', 0.8);
            } catch (error) {
                console.error('Capture photo error:', error);
                alert('Could not capture photo. Please try again.');
            }
        }

        async function processBarcodeImage(imageBlob) {
            closeCameraModal();
            alert(`📱 Barcode Processing!\n\n🔍 Analyzing captured image...\n⏳ Scanning for barcodes...\n\n✅ Simulated Result:\n📚 "The Thursday Murder Club"\n👤 Richard Osman\n📖 352 pages\n🏷️ Mystery\n\n🎉 Book would be added to your library!\n\n💡 Real implementation would use:\n• Google Vision API\n• ZXing library\n• QuaggaJS\n• Or similar barcode scanning service`);
        }

        async function processBookCoverImage(imageBlob) {
            closeCameraModal();
            alert(`📸 Cover Recognition!\n\n🤖 AI analyzing book cover...\n🔍 Identifying title and author...\n📊 Matching against book database...\n\n✅ Simulated Result:\n📚 "Project Hail Mary"\n👤 Andy Weir\n📖 496 pages\n🏷️ Science Fiction\n⭐ 4.5/5 average rating\n\n🎉 Book would be added to your to-read list!\n\n💡 Real implementation would use:\n• Google Cloud Vision API\n• Amazon Rekognition\n• Custom ML models\n• Book cover databases`);
        }

        // Share functions
        function shareBook(bookTitle) {
            try {
                const shareContent = document.getElementById('share-content');
                const shareModal = document.getElementById('share-modal');
                
                if (shareContent) {
                    shareContent.innerHTML = `
                        <p class="text-gray-600 mb-2">Share this amazing book:</p>
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl">
                            <p class="font-semibold text-gray-800">"${bookTitle}"</p>
                            <p class="text-sm text-gray-600">Click to see full details!</p>
                            <div class="flex justify-center mt-2">
                                <span class="text-yellow-400">★★★★★</span>
                            </div>
                        </div>
                    `;
                }
                
                if (shareModal) {
                    shareModal.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Share book error:', error);
            }
        }

        function shareStats() {
            try {
                const shareContent = document.getElementById('share-content');
                const shareModal = document.getElementById('share-modal');
                
                if (shareContent) {
                    shareContent.innerHTML = `
                        <p class="text-gray-600 mb-2">Share your reading stats:</p>
                        <div class="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-xl">
                            <p class="font-bold text-2xl text-gray-800">3 books</p>
                            <p class="text-sm text-gray-600">1,296 pages read</p>
                            <p class="text-sm text-gray-600">⭐ 4.7 avg rating</p>
                        </div>
                    `;
                }
                
                if (shareModal) {
                    shareModal.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Share stats error:', error);
            }
        }

        function hideShareModal() {
            try {
                const shareModal = document.getElementById('share-modal');
                if (shareModal) {
                    shareModal.classList.add('hidden');
                }
            } catch (error) {
                console.error('Hide share modal error:', error);
            }
        }

        function shareToSocial(platform) {
            try {
                alert(`Sharing to ${platform}! 🎉\n\nIn a real app, this would open the ${platform} sharing dialog.`);
                hideShareModal();
            } catch (error) {
                console.error('Share to social error:', error);
            }
        }

        function simulateManualSearch() {
            try {
                hideModal();
                const bookTitle = prompt("📚 Enter book title to search:");
                if (bookTitle) {
                    alert(`🔍 Manual Search Simulation!\n\n📖 Searching for: "${bookTitle}"\n🌐 Checking Google Books API...\n✅ Found multiple results!\n\n📋 Results would show:\n• Book covers\n• Author details\n• Page counts\n• Ratings\n• Descriptions\n\n✨ You could then add any book to your library!`);
                }
            } catch (error) {
                console.error('Manual search error:', error);
            }
        }

        // Initialize - show library tab by default
        document.addEventListener('DOMContentLoaded', function() {
            try {
                showTab('library');
                console.log('BookTracker initialized successfully');
            } catch (error) {
                console.error('Initialization error:', error);
            }
        });

        // PWA install prompt (simplified)
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            try {
                e.preventDefault();
                deferredPrompt = e;
                
                // Show install banner after a delay
                setTimeout(() => {
                    if (deferredPrompt && confirm('📱 Install BookTracker as an app on your device for the best experience?')) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('User accepted the install prompt');
                            }
                            deferredPrompt = null;
                        });
                    }
                }, 3000);
            } catch (error) {
                console.error('Install prompt error:', error);
            }
        });
    </script>
    </script>
</body>
</html>